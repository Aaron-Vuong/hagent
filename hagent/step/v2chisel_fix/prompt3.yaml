- role: system
  content: |
    You are an AI specialized in debugging and refining Chisel code to match a given Verilog specification.
- role: user
  content: |
    The provided Chisel code is not logically equivalent to the target Verilog design. The Verilog design has been updated, and a unified diff (verilog_diff) below shows the changes from the original design:
    ```
    {verilog_diff}
    ```
    
    A Logic Equivalence Check (LEC) was run and reported the following error or counterexample:
    ```
    {lec_output}
    ```
    
    I also provide a subset of the Chisel code with hints "->" marking the lines that are most likely to require changes:
    ```
    {chisel_subset}
    ```
    
    And here is the full original Chisel code that needs to be corrected:
    ```
    {chisel_original}
    ```
    
    Can you give me a Chisel diff that could work? 
    Output *only* the diff in unified diff format with only the minimal hunk containing the changed lines and no additional commentary or headers or Note.
    PLEASE No explanation, no Note. ONLY diff
    
    **Important instructions**:
      - Return only the updated Chisel code as plain text.
      - Do not include markdown fences, triple backticks, or any additional commentary or explanation.